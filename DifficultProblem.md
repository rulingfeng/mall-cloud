#cpu飙升问题产生场景
    tomcat高并发时候,所有线程都是运行状态所产生
    定时任务等等,应该独立放在一个模块
    redis的6379端口被注入挖矿等等...
    分布式锁的自旋

    如何避免:
        对服务做好限流熔断降级
        使用mq实现削峰,异步解耦
        定时任务独立放一个模块去部署
        一些端口,如6379不要随意开放
        写自旋锁需要控制循环次数

#如何排查生产环境cpu飙升
    linux top



#面试问题
##5.1 大华面试题
    一面：
    （1） 项目相关：
    1、说一下你的项目 什么是最终一致性
    2、怎么通过kafka + zk保证最终的一致性
    3、一致性方案当中，用到的是zk的什么节点
    4、怎么保证顺序消费kafka
    5、怎么保证在不同的partition中消费也是顺序的
    6、怎么不丢失消息
    7、怎么不重复发送消息

    （2）并发相关： 
    1、vloatile原理：可见性，顺序性
    2、AQS原理，如何加锁，入队，如何顺序唤醒，什么是condition，怎么notify
    
    （3）mysql InnoDB相关：
    1、 说下事务是怎么做的？
    2、 一个插入语句具体怎么做的？
    3、一个修改语句具体是怎么做的？
    4、undo log有什么用、redo log有什么用 、binlog有什么用
    5、有哪些锁，分别是什么时候用的
    6、什么是mvcc，什么是快照读，什么是当前读

    4）spring cloud相关：
    1、用过哪些组件
    2、feign与restTemplate的区别
    3、eureka server的底层原理
    4、feign的原理
    5、如果eureka server挂了，还能够继续进行微服务间调用嘛
    6、分布式事务： byte tcc之外还有哪些分布式事务框架

    （5）Spring Boot相关：
    1、Spring Boot启动原理
    
    （6）Reids Cluster相关： 
    1、主备复制原理 主数据未同步到备上，主就挂了，数据丢失怎么办？
    
    （7）GC相关：
    1、有哪几种GC G1和CMS的区别
    2、怎么设置的GC
    3、怎么确定GC参数配比 

    二面：（记得的） 
    团队组织结构 feign的原理 开发流程规范 担任角色，做了什么，这些问题没什么好说的， 直接喷出去就好了。
    由于和一面面试官聊的比较开心，后来加了微信。发现他最近也跳槽了，去了南京的阿里，成为我的同事。

##5.2 网易面试题
    一面：
    1. 项目介绍，最终一致性的项目遇到的问题 
    2.针对项目问问题
    3. 怎么做接口幂等
    4. 怎么做最终一致性，完整流程
    5. 做过的最高的tps是多少，如果tps如果下降了，怎么定位
    6. 说一下kafka，说下你的理解
    7. 怎么扩大吞吐量
    8. 怎么设计一个feign
    9. 讲讲你对网络编程的理解，kafka broker reactor
    10. http keepalive
    11. 502，bad gateway 是什么原因，怎么处理？
    12. nignx了解么？

    二面： 
    1. 自我介绍一下
    2. 熟悉什么微服务框架
    3. 如果要选择一个注册中心，怎么选择？
    4. 使用zk和eureka做注册中心，有什么区别
    5. AP，CP怎么做到的，详细说说
    6. 什么是Feign，为什么要Feign，如果没有Feign有什么问题
    7. 抛开Ribbon，Eureka Server自己有负载均衡的方式么
    8. Ribbon有哪几种负载均衡策略
    9. 看过哪些源码？
    10. 对Redis了解么，有基于兴趣看过Redis源码么
    11. Redis为什么快
    12. Redis在6版本之后加入了很多的异步线程机制，这对Redis的单线程工作是否有冲突呢？
    13. Redis的网络模型
    14. Reactor模型是怎么样的？
    15. 同步，非同步，阻塞，非阻塞
    16. Java和C++有个区别，就是一个实现了多继承，为什么Java不实现多继承，棱形问题是什么？
    17. Java的多态怎么理解，什么是运行时多态，什么是编译期多态
    18. Java的方法重载是什么
    19. Java的方法重写是什么
    20. 快排的最差O是什么，为什么
    21. 什么是排序时候的稳定性

    三面
    1. 自我介绍
    2. 说一个你做的最熟悉的项目
    3. 项目细节
    4. 如果让你优化这个项目你会怎么做
    5. 什么是Reactor模型，怎么做的
    6. 看过哪些源码
    7. 会不会ES
    8. 有没有做过全链路监控
    9. 会不会dubbo，或者其他的RPC框架代码
    10. 平时都会看哪些技术方面的东西，网站，博客，关注哪些开源框架

    总结：
    网易一面：问题相对比较水，但是时间持续了一个多小时。主要时间是在聊kafka上，我聊的是kafka的源码实现，面试官针对kafka的一些代码细节反复的问题，这个面试官对kafka真的很熟。例如kafka的ack 1，-1，0分别是怎么实现的，会有什么影响；kafka发送端的batch细节；kakfa broker的时间轮是怎么实现的，能说出kafka内部有多少个定时调度任务，随意讲？
    二面：偏向于基础，知道的就回答，不知道就说不会。
    三面：对于Reactor模型，我是用ZooKeeper 3.5之后的版本之后，和客户端连接使用Reactor模型的设计，和Kafka broker的Reactor模型的设计之间的对比，差异，为什么会有这种差异，来回答的，也占了很长的时间。

##5.3 阿里面试题
    一面： 一个小时的面试，45分钟的项目。 项目启动时慢，刚如何优化 调用的长尾效应明显，该怎么优化 
    二面：
    1、聊一下工作 kafka的理解，有哪些核心的功能
    2、kafka的producer和consumer是如何与kafka进行交互的
    3、kafka中的reactor模型是如何交互的
    4、zookeeper是什么样的cap模型
    5、zk实现的是什么一致性 zk的acl机制有了解么
    6、full gc是什么，如何在代码层面控制full gc的发生，有哪些规约
    7、spring了解么，什么是ioc
    8、spring的aop是什么
    9、spring的bean在初始化的时候，如果需要调用某些方法，有哪几种策略
    三面： 聊了一下项目、爱看什么书、有什么发展上的困惑、对未来的期待

    总结：
    阿里一面二面之间还有一次笔试，一般不太难。
    看到一面有45min的项目面试就知道了，项目不扎实，PASS；项目没亮点，PASS。
    基础一定要打牢，基础不牢，地动山摇。
    二面基本也是说的源码，以及一些设计的理解，为什么这么设计，有什么好处。最后的Spring问题，我理解就是凑时间的，随意的问了问。

##6.3 Spring Cloud
    eureka源码图：https://note.youdao.com/s/SZXLrAEe
    ribbon源码图：https://note.youdao.com/s/YYIglzQE
    Feign源码图：https://note.youdao.com/s/77sXEngR
    zuul源码图：https://note.youdao.com/s/VXp6H57u
    Hystrix源码图：https://note.youdao.com/s/VZzLoUWA


    